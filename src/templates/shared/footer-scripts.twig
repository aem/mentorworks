<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
<script src="{{site.theme.link}}/js/main.js"></script>

<script type="text/javascript">
  Vue.component('apply_form', {
  template: "#apply_form",
  props: {
    steps: {}
  },
  data () {
    return {
      currentStep: 0
    };
  },
  computed: {
    progressBarWidth() {
      var stepSize = 100 / this.steps.length;
      var currentStepStart = stepSize * this.currentStep;
      var currentStepMiddle = currentStepStart + (stepSize / 2);
      if (this.currentStep == this.steps.length - 1) {
        return '100%';
      }
      else {
        return 'calc(' + currentStepMiddle + '%)';
      }
    },
    currentSlot() {
      return this.steps[this.currentStep].slot;
    },
    backEnabled() {
      return this.currentStep > 1 && this.currentStep != this.steps.length - 1;
    },
    nextEnabled() {
      return this.currentStep != this.steps.length - 1;
    },
    isSlot0() {
      return this.currentSlot == 'page0';
    },
    nextButtonText() {
      if (this.currentStep == 0) {
        return 'Get started';
      } else if (this.currentStep == this.steps.length - 2) {
        return 'Submit application';
      } else {
        return 'Next';
      }
    }
  },
  methods: {
    goNext () {
      window.scrollTo(0, 0);
      if (this.currentStep < this.steps.length-1) {
        this.currentStep++;
      }
    },
    goBack () {
      window.scrollTo(0, 0);
      if (this.currentStep > 0) {
        this.currentStep--;
      }
    },
  },
  });

  Vue.component('apply', {
    template: '#apply',
    data() {
      return {
        personal: {
          name: "",
          phone: "",
          linkedinProfile: "",
          authorized: null,
          email: "",
          methodOfContact: "",
          otherProfSite: ""
        },
        referral: "",
        fundingAmount: "",
        reasonForFunding: "",
        undergraduate: {
          name: "",
          date: "",
          gpa: "",
          majorMinor: ""
        },
        graduate: {
          name: "",
          date: "",
          gpa: "",
          majorMinor: ""
        },
        bootCamp: {
          name: "",
          course: "",
          date: "",
          length: ""
        },
        freeResponse: {
          extracurriculars: "",
          workExperience: "",
          lifeDifficulty: "",
          careerInterests: ""
        },
        references: [
          {
            name: "",
            email: "",
            phone: ""
          },
          {
            name: "",
            email: "",
            phone: ""
          },
          {
            name: "",
            email: "",
            phone: ""
          },
        ],
        attachments: {
          resume: null,
          transcript: null,
          identificiation: null,
          financialAid: null
        },
        steps: [
          {
            slot: 'page0',
          },
          {
            slot: 'page1',
          },
          {
            slot: 'page2',
          },
          {
            slot: 'page3',
          },
          {
            slot: 'page4',
          },
          {
            slot: 'page5',
          },
          {
            slot: 'page6',
          }
        ]
      };
    },
    methods: {
    },
  });

  var app = new Vue({
    el: '#apply-form',
    template: `<apply steps="${this.steps}"></apply>`,
  });
</script>
